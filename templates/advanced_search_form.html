{% extends 'base.html' %}

{% block title %}의약품 고급 검색{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <div class="search-header">
        <h1 class="mb-3">의약품 고급 검색</h1>
        <p class="text-muted">의약품의 모양, 색상, 표시 등으로 검색하실 수 있습니다.</p>
    </div>
    
    <div class="card shadow-sm">
        <div class="card-body">
            <form action="/advanced/advanced-search/results" method="GET" id="advancedSearchForm">
                <div class="table-responsive">
                    <table class="table table-bordered search-table">
                        <tbody>
                            <!-- 식별표시 -->
                            <tr>
                                <th class="table-header">식별표시</th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <label class="me-2">문자</label>
                                        <div class="d-flex align-items-center me-4">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="text_type" id="text_type_all" value="all" checked>
                                                <label class="form-check-label" for="text_type_all">전부</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="text_type" id="text_type_korean" value="korean">
                                                <label class="form-check-label" for="text_type_korean">한글</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="text_type" id="text_type_english" value="english">
                                                <label class="form-check-label" for="text_type_english">영문</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="text_type" id="text_type_number" value="number">
                                                <label class="form-check-label" for="text_type_number">숫자</label>
                                            </div>
                                        </div>
                                        <input type="text" class="form-control" id="identification_text" name="identification_text" placeholder="식별문자">
                                    </div>
                                </td>
                                <th class="table-header">모양</th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div id="shapePreview" class="shape-preview me-3">
                                            <img src="/static/img/shapes/circle.png" alt="원형" id="selectedShapeImg">
                                        </div>
                                        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#shapeModal">
                                            모양 선택
                                        </button>
                                        <input type="hidden" id="drug_shape" name="drug_shape" value="">
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 제형 -->
                            <tr>
                                <th class="table-header">제형</th>
                                <td colspan="3">
                                    <div class="form-check-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_정제" value="정제">
                                            <label class="form-check-label" for="form_정제">정제</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_나정" value="나정">
                                            <label class="form-check-label" for="form_나정">나정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_필름코팅정" value="필름코팅정">
                                            <label class="form-check-label" for="form_필름코팅정">필름코팅정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_장용정" value="장용정">
                                            <label class="form-check-label" for="form_장용정">장용정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_다층정" value="다층정">
                                            <label class="form-check-label" for="form_다층정">다층정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_서방정" value="서방정">
                                            <label class="form-check-label" for="form_서방정">서방정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_저작정" value="저작정">
                                            <label class="form-check-label" for="form_저작정">저작정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_트로키정" value="트로키정">
                                            <label class="form-check-label" for="form_트로키정">트로키정</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_분말경질캡슐" value="분말경질캡슐">
                                            <label class="form-check-label" for="form_분말경질캡슐">분말경질캡슐</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_연질캡슐" value="연질캡슐">
                                            <label class="form-check-label" for="form_연질캡슐">연질캡슐</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="form_code_name" id="form_기타" value="기타">
                                            <label class="form-check-label" for="form_기타">기타</label>
                                        </div>
                                        <select class="form-select form-select-sm other-select" id="form_other" name="form_code_name_other">
                                            <option value="">전체</option>
                                            <option value="서방캡슐">서방캡슐</option>
                                            <option value="장용캡슐">장용캡슐</option>
                                            <option value="과립제">과립제</option>
                                            <option value="산제">산제</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 모양 -->
                            <tr>
                                <th class="table-header">모양</th>
                                <td colspan="3">
                                    <div class="form-check-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_원형" value="원형">
                                            <label class="form-check-label" for="shape_원형">원형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_타원형" value="타원형">
                                            <label class="form-check-label" for="shape_타원형">타원형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_반원형" value="반원형">
                                            <label class="form-check-label" for="shape_반원형">반원형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_삼각형" value="삼각형">
                                            <label class="form-check-label" for="shape_삼각형">삼각형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_사각형" value="사각형">
                                            <label class="form-check-label" for="shape_사각형">사각형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_마름모형" value="마름모형">
                                            <label class="form-check-label" for="shape_마름모형">마름모형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_장방형" value="장방형">
                                            <label class="form-check-label" for="shape_장방형">장방형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_육각형" value="육각형">
                                            <label class="form-check-label" for="shape_육각형">육각형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_팔각형" value="팔각형">
                                            <label class="form-check-label" for="shape_팔각형">팔각형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_오각형" value="오각형">
                                            <label class="form-check-label" for="shape_오각형">오각형</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="drug_shape_detail" id="shape_기타" value="기타">
                                            <label class="form-check-label" for="shape_기타">기타</label>
                                        </div>
                                        <select class="form-select form-select-sm other-select" id="shape_other" name="drug_shape_other">
                                            <option value="">전체</option>
                                            <option value="사과형">사과형</option>
                                            <option value="하트형">하트형</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 색깔 -->
                            <tr>
                                <th class="table-header">색깔</th>
                                <td colspan="3">
                                    <div class="color-selection">
                                        <div class="color-row">
                                            <div class="color-item">
                                                <input type="checkbox" id="color_white" name="color" value="하양" class="color-checkbox">
                                                <label for="color_white" class="color-box white"></label>
                                                <label for="color_white" class="color-label">하양</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_yellow" name="color" value="노랑" class="color-checkbox">
                                                <label for="color_yellow" class="color-box yellow"></label>
                                                <label for="color_yellow" class="color-label">노랑</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_orange" name="color" value="주황" class="color-checkbox">
                                                <label for="color_orange" class="color-box orange"></label>
                                                <label for="color_orange" class="color-label">주황</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_pink" name="color" value="분홍" class="color-checkbox">
                                                <label for="color_pink" class="color-box pink"></label>
                                                <label for="color_pink" class="color-label">분홍</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_red" name="color" value="빨강" class="color-checkbox">
                                                <label for="color_red" class="color-box red"></label>
                                                <label for="color_red" class="color-label">빨강</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_brown" name="color" value="갈색" class="color-checkbox">
                                                <label for="color_brown" class="color-box brown"></label>
                                                <label for="color_brown" class="color-label">갈색</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_lightgreen" name="color" value="연두" class="color-checkbox">
                                                <label for="color_lightgreen" class="color-box lightgreen"></label>
                                                <label for="color_lightgreen" class="color-label">연두</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_green" name="color" value="초록" class="color-checkbox">
                                                <label for="color_green" class="color-box green"></label>
                                                <label for="color_green" class="color-label">초록</label>
                                            </div>
                                        </div>
                                        <div class="color-row">
                                            <div class="color-item">
                                                <input type="checkbox" id="color_darkgreen" name="color" value="청록" class="color-checkbox">
                                                <label for="color_darkgreen" class="color-box darkgreen"></label>
                                                <label for="color_darkgreen" class="color-label">청록</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_blue" name="color" value="파랑" class="color-checkbox">
                                                <label for="color_blue" class="color-box blue"></label>
                                                <label for="color_blue" class="color-label">파랑</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_navy" name="color" value="남색" class="color-checkbox">
                                                <label for="color_navy" class="color-box navy"></label>
                                                <label for="color_navy" class="color-label">남색</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_purple" name="color" value="자주" class="color-checkbox">
                                                <label for="color_purple" class="color-box purple"></label>
                                                <label for="color_purple" class="color-label">자주</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_violet" name="color" value="보라" class="color-checkbox">
                                                <label for="color_violet" class="color-box violet"></label>
                                                <label for="color_violet" class="color-label">보라</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_gray" name="color" value="회색" class="color-checkbox">
                                                <label for="color_gray" class="color-box gray"></label>
                                                <label for="color_gray" class="color-label">회색</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_black" name="color" value="검정" class="color-checkbox">
                                                <label for="color_black" class="color-box black"></label>
                                                <label for="color_black" class="color-label">검정</label>
                                            </div>
                                            <div class="color-item">
                                                <input type="checkbox" id="color_transparent" name="color" value="투명" class="color-checkbox">
                                                <label for="color_transparent" class="color-box transparent"></label>
                                                <label for="color_transparent" class="color-label">투명</label>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 분할선 -->
                            <tr>
                                <th class="table-header">분할선</th>
                                <td colspan="3">
                                    <div class="row align-items-center">
                                        <div class="col-md-2">
                                            <div class="mb-2">앞</div>
                                        </div>
                                        <div class="col-md-10">
                                            <div class="d-flex align-items-center">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_front" id="line_front_none" value="없음">
                                                    <label class="form-check-label" for="line_front_none">없음</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_front" id="line_front_minus" value="-">
                                                    <label class="form-check-label" for="line_front_minus">'-' (또는 'ㅡ')</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_front" id="line_front_plus" value="+">
                                                    <label class="form-check-label" for="line_front_plus">'+'</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_front" id="line_front_other" value="기타">
                                                    <label class="form-check-label" for="line_front_other">기타</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row align-items-center mt-2">
                                        <div class="col-md-2">
                                            <div>뒤</div>
                                        </div>
                                        <div class="col-md-10">
                                            <div class="d-flex align-items-center">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_back" id="line_back_none" value="없음">
                                                    <label class="form-check-label" for="line_back_none">없음</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_back" id="line_back_minus" value="-">
                                                    <label class="form-check-label" for="line_back_minus">'-' (또는 'ㅡ')</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_back" id="line_back_plus" value="+">
                                                    <label class="form-check-label" for="line_back_plus">'+'</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" name="line_back" id="line_back_other" value="기타">
                                                    <label class="form-check-label" for="line_back_other">기타</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 제품명 -->
                            <tr>
                                <th class="table-header">제품명</th>
                                <td>
                                    <input type="text" class="form-control" id="item_name" name="item_name" placeholder="제품명">
                                </td>
                                <th class="table-header">제조사</th>
                                <td>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="entp_name" name="entp_name" placeholder="제조사">
                                        <select class="form-select" id="entp_name_select" style="max-width: 140px;">
                                            <option value="">직접입력</option>
                                            <option value="삼성제약">삼성제약</option>
                                            <option value="동아제약">동아제약</option>
                                            <option value="일양약품">일양약품</option>
                                            <option value="유한양행">유한양행</option>
                                            <option value="한미약품">한미약품</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 성분명 -->
                            <tr>
                                <th class="table-header">성분명</th>
                                <td colspan="3">
                                    <input type="text" class="form-control" id="component_name" name="component_name" placeholder="성분명">
                                </td>
                            </tr>
                            
                            <!-- 등록종류 -->
                            <tr>
                                <th class="table-header">등록종류</th>
                                <td colspan="3">
                                    <div class="form-check-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_type" id="reg_1" value="등록">
                                            <label class="form-check-label" for="reg_1">등록</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_type" id="reg_2" value="반영등록">
                                            <label class="form-check-label" for="reg_2">반영등록</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_type" id="reg_3" value="미등록">
                                            <label class="form-check-label" for="reg_3">미등록</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_type" id="reg_4" value="예비반영등록">
                                            <label class="form-check-label" for="reg_4">예비반영등록</label>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- 허가종류 -->
                            <tr>
                                <th class="table-header">등록상태</th>
                                <td colspan="3">
                                    <div class="form-check-group">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_1" value="허가">
                                            <label class="form-check-label" for="status_1">허가</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_2" value="등록가능">
                                            <label class="form-check-label" for="status_2">등록가능</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_3" value="등록불가">
                                            <label class="form-check-label" for="status_3">등록불가</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_4" value="선의의허락">
                                            <label class="form-check-label" for="status_4">선의의허락</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_5" value="화일의회사">
                                            <label class="form-check-label" for="status_5">화일의회사</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_6" value="조정대상">
                                            <label class="form-check-label" for="status_6">조정대상</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_7" value="신청차하">
                                            <label class="form-check-label" for="status_7">신청차하</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="checkbox" name="registration_status" id="status_8" value="합의의회자">
                                            <label class="form-check-label" for="status_8">합의의회자</label>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-4 text-center">
                    <button type="submit" class="btn btn-primary btn-lg px-5">검색</button>
                    <button type="reset" class="btn btn-outline-secondary btn-lg px-5 ms-2">초기화</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 모양 선택 모달 -->
<div class="modal fade" id="shapeModal" tabindex="-1" aria-labelledby="shapeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="shapeModalLabel">모양 선택</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="원형">
                            <img src="/static/img/shapes/circle.png" alt="원형">
                            <p class="text-center">원형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="타원형">
                            <img src="/static/img/shapes/oval.png" alt="타원형">
                            <p class="text-center">타원형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="삼각형">
                            <img src="/static/img/shapes/triangle.png" alt="삼각형">
                            <p class="text-center">삼각형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="사각형">
                            <img src="/static/img/shapes/square.png" alt="사각형">
                            <p class="text-center">사각형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="오각형">
                            <img src="/static/img/shapes/pentagon.png" alt="오각형">
                            <p class="text-center">오각형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="육각형">
                            <img src="/static/img/shapes/hexagon.png" alt="육각형">
                            <p class="text-center">육각형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="팔각형">
                            <img src="/static/img/shapes/octagon.png" alt="팔각형">
                            <p class="text-center">팔각형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="장방형">
                            <img src="/static/img/shapes/rectangle.png" alt="장방형">
                            <p class="text-center">장방형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="마름모형">
                            <img src="/static/img/shapes/diamond.png" alt="마름모형">
                            <p class="text-center">마름모형</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="shape-item" data-shape="반원형">
                            <img src="/static/img/shapes/semicircle.png" alt="반원형">
                            <p class="text-center">반원형</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary" id="selectShapeBtn" data-bs-dismiss="modal">선택</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/advanced_search.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 모양 선택 관련 기능
    const shapeItems = document.querySelectorAll('.shape-item');
    const drugShapeInput = document.getElementById('drug_shape');
    const selectedShapeImg = document.getElementById('selectedShapeImg');
    const selectShapeBtn = document.getElementById('selectShapeBtn');
    
    let selectedShape = '';
    
    // 모양 아이템 클릭 이벤트
    shapeItems.forEach(item => {
        item.addEventListener('click', function() {
            // 이전 선택 제거
            shapeItems.forEach(el => el.classList.remove('active'));
            // 현재 선택 표시
            this.classList.add('active');
            // 선택한 모양 저장
            selectedShape = this.getAttribute('data-shape');
        });
    });
    
    // 모양 선택 버튼 클릭 이벤트
    selectShapeBtn.addEventListener('click', function() {
        if (selectedShape) {
            // 선택한 모양 값 설정
            drugShapeInput.value = selectedShape;
            // 선택한 모양 이미지 표시
            const selectedItem = document.querySelector(`.shape-item[data-shape="${selectedShape}"]`);
            if (selectedItem) {
                const imgSrc = selectedItem.querySelector('img').src;
                selectedShapeImg.src = imgSrc;
                selectedShapeImg.alt = selectedShape;
            }
        }
    });
    
    // 제조사 드롭다운 연동
    const entpNameInput = document.getElementById('entp_name');
    const entpNameSelect = document.getElementById('entp_name_select');
    
    entpNameSelect.addEventListener('change', function() {
        if (this.value) {
            entpNameInput.value = this.value;
        }
    });
    
    // 폼 초기화 버튼 이벤트
    const resetButton = document.querySelector('button[type="reset"]');
    if (resetButton) {
        resetButton.addEventListener('click', function() {
            // 색상 선택 초기화
            document.querySelectorAll('.color-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // 모양 선택 초기화
            selectedShapeImg.src = '/static/img/shapes/circle.png';
            selectedShapeImg.alt = '원형';
            drugShapeInput.value = '';
            
            // 선택된 모양 클래스 초기화
            shapeItems.forEach(el => el.classList.remove('active'));
        });
    }
    
    // 색상 체크박스 이벤트
    const colorCheckboxes = document.querySelectorAll('.color-checkbox');
    colorCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const label = this.nextElementSibling;
            if (this.checked) {
                label.style.borderColor = '#0d6efd';
                label.style.boxShadow = '0 0 0 2px rgba(13, 110, 253, 0.5)';
            } else {
                label.style.borderColor = '#dee2e6';
                label.style.boxShadow = 'none';
            }
        });
    });
});
</script>
{% endblock %}